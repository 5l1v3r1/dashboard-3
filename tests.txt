
  /api/administrator/account-profiles-count
    exceptions
      invalid-accountid
        ✓ missing querystring accountid value
        ✓ invalid querystring accountid value
    returns
      ✓ integer

  /api/administrator/account-profiles
    exceptions
      invalid-accountid
        ✓ unspecified querystring accountid
        ✓ invalid querystring accountid value
    receives
      ✓ optional querystring offset (integer)
      ✓ optional querystring all (boolean)
    returns
      ✓ array
    configuration
      ✓ environment PAGE_SIZE

  /api/administrator/account-reset-codes-count
    exceptions
      invalid-accountid
        ✓ missing querystring accountid value
        ✓ invalid querystring accountid value
    returns
      ✓ integer

  /api/administrator/account-reset-codes
    exceptions
      invalid-accountid
        ✓ unspecified querystring accountid
        ✓ invalid querystring accountid value
    receives
      ✓ optional querystring offset (integer)
      ✓ optional querystring all (boolean)
    returns
      ✓ array
    redacts
      ✓ secret code hash
    configuration
      ✓ environment PAGE_SIZE

  /api/administrator/account-sessions-count
    exceptions
      invalid-accountid
        ✓ missing querystring accountid value
        ✓ invalid querystring accountid value
    returns
      ✓ integer

  /api/administrator/account-sessions
    exceptions
      invalid-accountid
        ✓ unspecified querystring accountid
        ✓ invalid querystring accountid value
    receives
      ✓ optional querystring offset (integer)
      ✓ optional querystring all (boolean)
    returns
      ✓ array
    redacts
      ✓ session tokens
    configuration
      ✓ environment PAGE_SIZE

  /api/administrator/account
    exceptions
      invalid-accountid
        ✓ unspecified querystring accountid
        ✓ invalid querystring accountid value
    returns
      ✓ object
    redacts
      ✓ username hash
      ✓ password hash
      ✓ session key

  /api/administrator/accounts-count
    returns
      ✓ integer

  /api/administrator/accounts
    returns
      ✓ array
    receives
      ✓ optional querystring offset (integer)
      ✓ optional querystring all (boolean)
    returns
      ✓ array
    redacts
      ✓ username hash
      ✓ password hash
      ✓ sessionKey
    configuration
      ✓ environment PAGE_SIZE

  /api/administrator/administrator-accounts-count
    returns
      ✓ integer

  /api/administrator/administrator-accounts
    receives
      ✓ optional querystring offset (integer)
      ✓ optional querystring all (boolean)
    returns
      ✓ array
    redacts
      ✓ username hash
      ✓ password hash
      ✓ session key
    configuration
      ✓ environment PAGE_SIZE

  /api/administrator/create-reset-code
    exceptions
      invalid-accountid
        ✓ unspecified querystring accountid
        ✓ invalid querystring accountid value
      invalid-secret-code
        ✓ missing posted secret-code
      invalid-secret-code-length
        ✓ invalid posted secret-code length
    returns
      ✓ object
    configuration
      ✓ environment MINIMUM_RESET_CODE_LENGTH
      ✓ environment MAXIMUM_RESET_CODE_LENGTH

  /api/administrator/delete-account
    exceptions
      invalid-accountid
        ✓ missing querystring accountid value
        ✓ invalid querystring accountid value
    receieves
      ✓ querystring accountid
    returns
      ✓ boolean

  /api/administrator/deleted-accounts-count
    returns
      ✓ querystring accountid

  /api/administrator/deleted-accounts
    receives
      ✓ optional querystring offset (integer)
      ✓ optional querystring all (boolean)
    returns
      ✓ array
    redacts
      ✓ username hash
      ✓ password hash
      ✓ session key
    configuration
      ✓ environment PAGE_SIZE

  /api/administrator/profile
    exceptions
      invalid-profileid
        ✓ missing querystring profileid value
        ✓ invalid querystring profileid value
    returns
      ✓ object

  /api/administrator/profiles-count
    returns
      ✓ integer

  /api/administrator/profiles
    receives
      ✓ optional querystring offset (integer)
      ✓ optional querystring all (boolean)
    returns
      ✓ array
    configuration
      ✓ environment PAGE_SIZE

  /api/administrator/reset-account-administrator
    exceptions
      invalid-accountid
        ✓ missing querystring accountid value
        ✓ invalid querystring accountid value
      invalid-account
        ✓ ineligible querystring accountid
    requires
      ✓ querystring accountid is administrator
      ✓ querystring accountid is not owner
    returns
      ✓ object

  /api/administrator/reset-code
    exceptions
      invalid-reset-codeid
        ✓ missing querystring codeid value
        ✓ invalid querystring codeid value
    returns
      ✓ object
    redacts
      ✓ secret code hash

  /api/administrator/reset-codes-count
    returns
      ✓ integer

  /api/administrator/reset-codes
    receives
      ✓ optional querystring offset (integer)
      ✓ optional querystring all (boolean)
    returns
      ✓ should return reset codes
    redacts
      ✓ secret code hash
    configuration
      ✓ environment PAGE_SIZE

  /api/administrator/reset-session-key
    exceptions
      invalid-accountid
        ✓ missing querystring accountid value
        ✓ invalid querystring accountid value
    invalid-account
      ✓ ineligible querystring accountid
    requires
      ✓ querystring accountid is not deleted
    returns
      ✓ object
      ✓ should increase sessionKeyNumber
      ✓ should update sessionKeyLastReset

  /api/administrator/session
    exceptions
      invalid-sessionid
        ✓ unspecified querystring accountid
        ✓ invalid querystring sessionid value
    returns
      ✓ object
    redacts
      ✓ token hash

  /api/administrator/sessions-count
    returns
      ✓ integer

  /api/administrator/sessions
    receives
      ✓ optional querystring offset (integer)
      ✓ optional querystring all (boolean)
    returns
      ✓ array
    redacts
      ✓ session token
    configuration
      ✓ environment PAGE_SIZE

  /api/administrator/set-account-administrator
    exceptions
      invalid-accountid
        ✓ unspecified querystring accountid
        ✓ invalid querystring accountid value
      invalid-account
        ✓ ineligible querystring accountid
    requires
      ✓ querystring accountid is not administrator
    returns
      ✓ object

  /api/administrator/set-account-deleted
    exceptions
      invalid-accountid
        ✓ unspecified querystring accountid
        ✓ invalid querystring accountid value
      invalid-account
        ✓ ineligible querystring accountid
    invalid-account
      ✓ querystring accountid is deleted
    returns
      ✓ object
    configuration
      ✓ environment DELETE_DELAY

  /api/administrator/set-owner-account
    exceptions
      invalid-accountid
        ✓ missing querystring accountid value
        ✓ invalid querystring accountid value
      invalid-account
        ✓ ineligible accessing account
        ✓ ineligible querystring accountid
    requires
      ✓ accessing account is owner
      ✓ querystring account is not owner
      ✓ querystring account is not deleted
    returns
      ✓ object

  /api/user/account
    exceptions
      invalid-accountid
        ✓ missing querystring accountid
        ✓ invalid querystring accountid
      invalid-account
        ✓ ineligible querystring accountid
    returns
      ✓ object
    redacts
      ✓ username hash
      ✓ password hash
      ✓ sessionKey

  /api/user/create-account
    exceptions
      invalid-username
        ✓ missing posted username
      invalid-username-length
        ✓ posted username too short
        ✓ posted username too long
      invalid-password
        ✓ missing posted password
      invalid-password-length
        ✓ posted password too short
        ✓ posted password too long
      invalid-first-name
        ✓ missing posted first-name
      invalid-first-name-length
        ✓ posted first-name too short
        ✓ posted first-name too long
      invalid-last-name
        ✓ missing posted last-name
      invalid-last-name-length
        ✓ posted last-name too short
        ✓ posted last-name too long
      invalid-display-name
        ✓ missing posted display-name
      invalid-display-name-length
        ✓ posted display-name too short
        ✓ posted display-name too long
      invalid-company-name
        ✓ missing posted company-name
      invalid-contact-email
        ✓ missing posted contact-email
      invalid-display-email
        ✓ missing posted display-email
      invalid-location
        ✓ missing posted location
      invalid-occupation
        ✓ missing posted occupation
      invalid-phone
        ✓ missing posted phone
      invalid-dob
        ✓ missing posted dob
    receives
      ✓ optional posted first-name
      ✓ optional posted last-name
      ✓ optional posted display-name
      ✓ optional posted company-name
      ✓ optional posted contact-email
      ✓ optional posted display-email
      ✓ optional posted location
      ✓ optional posted occupation
      ✓ optional posted phone
      ✓ optional posted dob
    returns
      ✓ object
    configuration
      ✓ environment MINIMUM_USERNAME_LENGTH
      ✓ environment MAXIMUM_USERNAME_LENGTH
      ✓ environment MINIMUM_PASSWORD_LENGTH
      ✓ environment MAXIMUM_PASSWORD_LENGTH
      ✓ environment REQUIRE_PROFILE
      ✓ environment USER_PROFILE_FIELDS
      ✓ environment MINIMUM_PROFILE_FIRST_NAME_LENGTH
      ✓ environment MAXIMUM_PROFILE_FIRST_NAME_LENGTH
      ✓ environment MINIMUM_PROFILE_LAST_NAME_LENGTH
      ✓ environment MAXIMUM_PROFILE_LAST_NAME_LENGTH
      ✓ environment MINIMUM_PROFILE_DISPLAY_NAME_LENGTH
      ✓ environment MAXIMUM_PROFILE_DISPLAY_NAME_LENGTH
      ✓ environment MINIMUM_PROFILE_COMPANY_NAME_LENGTH
      ✓ environment MAXIMUM_PROFILE_COMPANY_NAME_LENGTH
    override
      ✓ request specifies required fields

  /api/user/create-profile
    exceptions
      invalid-accountid
        ✓ missing querystring accountid
        ✓ invalid querystring accountid
      invalid-accountid
        ✓ ineligible querystring accountid
      invalid-first-name
        ✓ missing posted first-name
      invalid-first-name-length
        ✓ posted first-name too short
        ✓ posted first-name too long
      invalid-last-name
        ✓ missing posted last-name
      invalid-last-name-length
        ✓ posted last-name too short
        ✓ posted last-name too long
      invalid-display-name
        ✓ missing posted display-name
      invalid-display-name-length
        ✓ posted display-name too short
        ✓ posted display-name too long
      invalid-company-name-length
        ✓ posted company-name too short
        ✓ posted company-name too long
      invalid-company-name-length
        ✓ invalid-company-name-length
      invalid-contact-email
        ✓ missing posted contact-email
      invalid-display-email
        ✓ missing posted display-email
      invalid-location
        ✓ missing posted location
      invalid-occupation
        ✓ missing posted occupation
      invalid-phone
        ✓ missing posted phone
      invalid-dob
        ✓ missing posted dob
    receives
      ✓ optional posted first-name
      ✓ optional posted last-name
      ✓ optional posted display-name
      ✓ optional posted company-name
      ✓ optional posted contact-email
      ✓ optional posted display-email
      ✓ optional posted location
      ✓ optional posted occupation
      ✓ optional posted phone
      ✓ optional posted dob
    configuration
      ✓ environment USER_PROFILE_FIELDS
      ✓ environment MINIMUM_PROFILE_FIRST_NAME_LENGTH
      ✓ environment MAXIMUM_PROFILE_FIRST_NAME_LENGTH
      ✓ environment MINIMUM_PROFILE_LAST_NAME_LENGTH
      ✓ environment MAXIMUM_PROFILE_LAST_NAME_LENGTH
      ✓ environment MINIMUM_PROFILE_DISPLAY_NAME_LENGTH
      ✓ environment MAXIMUM_PROFILE_DISPLAY_NAME_LENGTH
      ✓ environment MINIMUM_PROFILE_COMPANY_NAME_LENGTH
      ✓ environment MAXIMUM_PROFILE_COMPANY_NAME_LENGTH
    override
      ✓ request specifies required fields

  /api/user/create-reset-code
    exceptions
      invalid-accountid
        ✓ missing querystring accountid
        ✓ invalid querystring accountid
      invalid-accountid
        ✓ ineligible querystring accountid
      invalid-secret-code
        ✓ missing posted secret-code
      invalid-secret-code-length
        ✓ posted secret code too short
        ✓ posted secret code too long
    returns
      ✓ object

  /api/user/create-session
    exceptions
      invalid-username
        ✓ missing posted username
      invalid-password
        ✓ missing posted password
    receives
      ✓ optional posted remember (hours|days)
    returns
      ✓ object

  /api/user/delete-profile
    exceptions
      invalid-profileid
        ✓ missing querystring profileid
        ✓ invalid querystring profileid
      invalid-profile
        ✓ querystring profileid is default contact profile
      invalid-account
        ✓ ineligible querystring profileid
    returns
      ✓ boolean

  /api/user/delete-reset-code
    exceptions
      invalid-reset-codeid
        ✓ missing querystring codeid
        ✓ invalid querystring codeid
      invalid-account
        ✓ ineligible querystring codeid
    returns
      ✓ boolean

  /api/user/profile
    exceptions
      invalid-profileid
        ✓ missing querystring profileid
        ✓ invalid querystring profileid
      invalid-account
        ✓ ineligible querystring profileid
    returns
      ✓ object

  /api/user/profiles-count
    exceptions
      invalid-accountid
        ✓ missing querystring accountid
        ✓ invalid querystring accountid
      invalid-account
        ✓ ineligible querystring accountid
    returns
      ✓ integer

  /api/user/profiles
    exceptions
      invalid-accountid
        ✓ missing querystring accountid
        ✓ invalid querystring accountid
      invalid-account
        ✓ ineligible querystring accountid
    receives
      ✓ optional querystring offset (integer)
      ✓ optional querystring all (boolean)
    returns
      ✓ array
    redacts
      ✓ profile hash
    configuration
      ✓ environment PAGE_SIZE

  /api/user/reset-account-deleted
    exceptions
      invalid-username
        ✓ missing posted username
        ✓ invalid posted username
      invalid-password
        ✓ missing posted password
        ✓ invalid posted password
      invalid-account
        ✓ credentialed account is not scheduled for deletion
    returns
      ✓ object

  /api/user/reset-account-password
    exceptions
      invalid-username
        ✓ missing posted username
        ✓ invalid posted username
      invalid-password
        ✓ missing posted new-password
      invalid-secret-code
        ✓ missing posted secret-code
      invalid-reset-code
        ✓ invalid posted secret-code
    returns
      ✓ boolean

  /api/user/reset-code
    exceptions
      invalid-reset-codeid
        ✓ missing querystring codeid
        ✓ invalid querystring codeid
      invalid-account
        ✓ ineligible querystring codeid
    returns
      ✓ object
    redacts
      ✓ secret code hash

  /api/user/reset-codes-count
    exceptions
      invalid-accountid
        ✓ missing querystring accountid
        ✓ invalid querystring accountid
      invalid-account
        ✓ ineligible querystring accountid
    returns
      ✓ integer

  /api/user/reset-codes
    exceptions
      invalid-accountid
        ✓ missing querystring accountid
        ✓ invalid querystring accountid
      invalid-account
        ✓ ineligible querystring accountid
    receives
      ✓ optional querystring offset (integer)
      ✓ optional querystring all (boolean)
    returns
      ✓ array
    redacts
      ✓ secret code hash
    configuration
      ✓ environment PAGE_SIZE

  /api/user/reset-session-key
    exceptions
      invalid-accountid
        ✓ missing querystring accountid
        ✓ invalid querystring accountid
      invalid-account
        ✓ ineligible querystring accountid
    returns
      ✓ boolean

  /api/user/session
    exceptions
      invalid-sessionid
        ✓ missing querystring sessionid
        ✓ invalid querystring sessionid
      invalid-account
        ✓ ineligible querystring sessionid
    returns
      ✓ object
    redacts
      ✓ token hash

  /api/user/sessions-count
    exceptions
      invalid-accountid
        ✓ missing querystring accountid
        ✓ invalid querystring accountid
      invalid-account
        ✓ ineligible querystring accountid
    returns
      ✓ integer

  /api/user/sessions
    exceptions
      invalid-accountid
        ✓ missing querystring accountid
        ✓ invalid querystring accountid
      invalid-account
        ✓ ineligible querystring accountid
    receives
      ✓ optional querystring offset (integer)
      ✓ optional querystring all (boolean)
    returns
      ✓ array
    configuration
      ✓ environment PAGE_SIZE

  /api/user/set-account-deleted
    exceptions
      invalid-accountid
        ✓ missing querystring accountid
        ✓ invalid querystring accountid
      invalid-account
        ✓ ineligible querystring accountid
      invalid-password
        ✓ missing posted password
        ✓ invalid posted password
    response
      ✓ object
    configuration
      ✓ environment DELETE_DELAY

  /api/user/set-account-password
    exceptions
      invalid-accountid
        ✓ missing querystring accountid
        ✓ invalid querystring accountid
      invalid-account
        ✓ ineligible querystring accountid
      invalid-password
        ✓ missing posted password
        ✓ invalid posted password
      invalid-new-password
        ✓ missing posted new-password
      invalid-new-password-length
        ✓ posted new-password too short
        ✓ posted new-password too long
    returns
      ✓ should apply new password

  /api/user/set-account-profile
    exceptions
      invalid-accountid
        ✓ missing querystring accountid
        ✓ invalid querystring accountid
      invalid-account
        ✓ ineligible querystring accountid
      invalid-profileid
        ✓ missing posted profileid
        ✓ invalid posted profileid
    returns
      ✓ object

  /api/user/set-account-username
    exceptions
      invalid-accountid
        ✓ missing querystring accountid
        ✓ invalid querystring accountid
      invalid-account
        ✓ ineligible querystring accountid
      invalid-password
        ✓ missing posted password
        ✓ invalid posted password
      invalid-new-username
        ✓ missing posted new-username
      invalid-new-username-length
        ✓ posted new-username too short
        ✓ posted new-username too long
    returns
      ✓ object

  /api/user/set-session-ended
    exceptions
      invalid-sessionid
        ✓ missing querystring sessionid
        ✓ invalid querystring sessionid
      invalid-session
        ✓ querystring sessionid is not active session
      invalid-account
        ✓ ineligible querystring sessionid
    returns
      ✓ object

  /api/user/set-session-verified
    exceptions
      invalid-sessionid
        ✓ missing querystring sessionid
        ✓ invalid querystring sessionid
      invalid-account
        ✓ ineligible querystring sessionid
    returns
      ✓ object

  /api/user/update-profile
    exceptions
      invalid-profileid
        ✓ missing querystring profileid
        ✓ invalid querystring profileid
      invalid-profileid
        ✓ ineligible querystring profileid
      invalid-first-name
        ✓ missing posted first-name
      invalid-first-name-length
        ✓ posted first-name too short
        ✓ posted first-name too long
      invalid-last-name
        ✓ missing posted last-name
      invalid-last-name-length
        ✓ posted last-name too short
        ✓ posted last-name too long
      invalid-display-name
        ✓ missing posted display-name
      invalid-display-name-length
        ✓ posted display-name too short
        ✓ posted display-name too long
      invalid-company-name
        ✓ missing posted company-name
      invalid-company-name-length
        ✓ posted company-name too short
        ✓ posted company-name too long
      invalid-contact-email
        ✓ missing posted contact-email
      invalid-display-email
        ✓ missing posted display-email
      invalid-location
        ✓ missing posted location
      invalid-occupation
        ✓ missing posted occupation
      invalid-phone
        ✓ missing posted phone
      invalid-dob
        ✓ missing posted dob
    receives
      ✓ optional posted first-name
      ✓ optional posted last-name
      ✓ optional posted display-name
      ✓ optional posted company-name
      ✓ optional posted contact-email
      ✓ optional posted display-email
      ✓ optional posted location
      ✓ optional posted occupation
      ✓ optional posted phone
      ✓ optional posted dob
    returns
      ✓ object
    configuration
      ✓ environment USER_PROFILE_FIELDS
      ✓ environment MINIMUM_PROFILE_FIRST_NAME_LENGTH
      ✓ environment MAXIMUM_PROFILE_FIRST_NAME_LENGTH
      ✓ environment MINIMUM_PROFILE_LAST_NAME_LENGTH
      ✓ environment MAXIMUM_PROFILE_LAST_NAME_LENGTH
      ✓ environment MINIMUM_PROFILE_DISPLAY_NAME_LENGTH
      ✓ environment MAXIMUM_PROFILE_DISPLAY_NAME_LENGTH
      ✓ environment MINIMUM_PROFILE_COMPANY_NAME_LENGTH
      ✓ environment MAXIMUM_PROFILE_COMPANY_NAME_LENGTH
    override
      ✓ request specifies required fields


  789 passing (3m)

